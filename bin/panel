#!/usr/bin/env bash

BG="#eeeeee"
FG="#9e9e9e"
FONT="Source Code Pro for Powerline:medium:size=9"

tmp=$(mktemp -d)
fifo=${tmp}/fifo
mkfifo ${fifo}

running=true

stat() {
	(
		while $running; do
			panel_data
			sleep 0.5
		done
	) > ${fifo}
}

cleanup() {
	running=false
	sleep 0.6
	rm -r ${tmp}
}

trap cleanup INT

cat ${fifo} | lemonbar -g x24 -p -B "${BG}" -F "${FG}" -f "${FONT}" &> /dev/null &
stat &

wait
